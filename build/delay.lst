ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 2
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"delay.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "Drivers/SYSTEM/delay/delay.c"
  18              		.section	.text.delay_init,"ax",%progbits
  19              		.align	1
  20              		.p2align 2,,3
  21              		.global	delay_init
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	delay_init:
  27              	.LVL0:
  28              	.LFB65:
   1:Drivers/SYSTEM/delay/delay.c **** /**
   2:Drivers/SYSTEM/delay/delay.c ****  **************************************************************************************************
   3:Drivers/SYSTEM/delay/delay.c ****  * @file        delay.c
   4:Drivers/SYSTEM/delay/delay.c ****  * @author      ÕýµãÔ­×ÓÍÅ¶Ó(ALIENTEK)
   5:Drivers/SYSTEM/delay/delay.c ****  * @version     V1.0
   6:Drivers/SYSTEM/delay/delay.c ****  * @date        2020-04-17
   7:Drivers/SYSTEM/delay/delay.c ****  * @brief       Ê¹ÓÃSysTickµÄÆÕÍ¨¼ÆÊýÄ£Ê½¶ÔÑÓ³Ù½øÐÐ¹ÜÀí(Ö§³Öucosii)
   8:Drivers/SYSTEM/delay/delay.c ****  *              Ìá¹©delay_init³õÊ¼»¯º¯Êý£¬ delay_usºÍdelay_msµÈÑÓÊ±º¯Êý
   9:Drivers/SYSTEM/delay/delay.c ****  * @license     Copyright (c) 2020-2032, ¹ãÖÝÊÐÐÇÒíµç×Ó¿Æ¼¼ÓÐÏÞ¹«Ë¾
  10:Drivers/SYSTEM/delay/delay.c ****  **************************************************************************************************
  11:Drivers/SYSTEM/delay/delay.c ****  * @attention
  12:Drivers/SYSTEM/delay/delay.c ****  *
  13:Drivers/SYSTEM/delay/delay.c ****  * ÊµÑéÆ½Ì¨:ÕýµãÔ­×Ó STM32F103¿ª·¢°å
  14:Drivers/SYSTEM/delay/delay.c ****  * ÔÚÏßÊÓÆµ:www.yuanzige.com
  15:Drivers/SYSTEM/delay/delay.c ****  * ¼¼ÊõÂÛÌ³:www.openedv.com
  16:Drivers/SYSTEM/delay/delay.c ****  * ¹«Ë¾ÍøÖ·:www.alientek.com
  17:Drivers/SYSTEM/delay/delay.c ****  * ¹ºÂòµØÖ·:openedv.taobao.com
  18:Drivers/SYSTEM/delay/delay.c ****  *
  19:Drivers/SYSTEM/delay/delay.c ****  * ÐÞ¸ÄËµÃ÷
  20:Drivers/SYSTEM/delay/delay.c ****  * V1.0 20211103
  21:Drivers/SYSTEM/delay/delay.c ****  * µÚÒ»´Î·¢²¼
  22:Drivers/SYSTEM/delay/delay.c ****  *
  23:Drivers/SYSTEM/delay/delay.c ****  **************************************************************************************************
  24:Drivers/SYSTEM/delay/delay.c ****  */
  25:Drivers/SYSTEM/delay/delay.c **** 
  26:Drivers/SYSTEM/delay/delay.c **** #include "./SYSTEM/sys/sys.h"
  27:Drivers/SYSTEM/delay/delay.c **** #include "./SYSTEM/delay/delay.h"
  28:Drivers/SYSTEM/delay/delay.c **** 
  29:Drivers/SYSTEM/delay/delay.c **** 
  30:Drivers/SYSTEM/delay/delay.c **** static uint16_t  g_fac_us = 0;      /* usÑÓÊ±±¶³ËÊý */
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 2


  31:Drivers/SYSTEM/delay/delay.c **** 
  32:Drivers/SYSTEM/delay/delay.c **** /* Èç¹ûSYS_SUPPORT_OS¶¨ÒåÁË,ËµÃ÷ÒªÖ§³ÖOSÁË(²»ÏÞÓÚUCOS) */
  33:Drivers/SYSTEM/delay/delay.c **** #if SYS_SUPPORT_OS
  34:Drivers/SYSTEM/delay/delay.c **** 
  35:Drivers/SYSTEM/delay/delay.c **** /* Ìí¼Ó¹«¹²Í·ÎÄ¼þ ( ucosÐèÒªÓÃµ½) */
  36:Drivers/SYSTEM/delay/delay.c **** #include "includes.h"
  37:Drivers/SYSTEM/delay/delay.c **** 
  38:Drivers/SYSTEM/delay/delay.c **** /* ¶¨Òåg_fac_ms±äÁ¿, ±íÊ¾msÑÓÊ±µÄ±¶³ËÊý, ´ú±íÃ¿¸ö½ÚÅÄµÄmsÊý, (½öÔÚÊ¹ÄÜosµÄÊ±ºò,ÐèÒªÓÃµ½) */
  39:Drivers/SYSTEM/delay/delay.c **** static uint16_t g_fac_ms = 0;
  40:Drivers/SYSTEM/delay/delay.c **** 
  41:Drivers/SYSTEM/delay/delay.c **** 
  42:Drivers/SYSTEM/delay/delay.c **** /*
  43:Drivers/SYSTEM/delay/delay.c ****  *  µ±delay_us/delay_msÐèÒªÖ§³ÖOSµÄÊ±ºòÐèÒªÈý¸öÓëOSÏà¹ØµÄºê¶¨ÒåºÍº¯ÊýÀ´Ö§³Ö
  44:Drivers/SYSTEM/delay/delay.c ****  *  Ê×ÏÈÊÇ3¸öºê¶¨Òå:
  45:Drivers/SYSTEM/delay/delay.c ****  *      delay_osrunning    :ÓÃÓÚ±íÊ¾OSµ±Ç°ÊÇ·ñÕýÔÚÔËÐÐ,ÒÔ¾ö¶¨ÊÇ·ñ¿ÉÒÔÊ¹ÓÃÏà¹Øº¯Êý
  46:Drivers/SYSTEM/delay/delay.c ****  *      delay_ostickspersec:ÓÃÓÚ±íÊ¾OSÉè¶¨µÄÊ±ÖÓ½ÚÅÄ,delay_init½«¸ù¾ÝÕâ¸ö²ÎÊýÀ´³õÊ¼»¯systick
  47:Drivers/SYSTEM/delay/delay.c ****  *      delay_osintnesting :ÓÃÓÚ±íÊ¾OSÖÐ¶ÏÇ¶Ì×¼¶±ð,ÒòÎªÖÐ¶ÏÀïÃæ²»¿ÉÒÔµ÷¶È,delay_msÊ¹ÓÃ¸Ã²ÎÊýÀ´¾ö¶¨È
  48:Drivers/SYSTEM/delay/delay.c ****  *  È»ºóÊÇ3¸öº¯Êý:
  49:Drivers/SYSTEM/delay/delay.c ****  *      delay_osschedlock  :ÓÃÓÚËø¶¨OSÈÎÎñµ÷¶È,½ûÖ¹µ÷¶È
  50:Drivers/SYSTEM/delay/delay.c ****  *      delay_osschedunlock:ÓÃÓÚ½âËøOSÈÎÎñµ÷¶È,ÖØÐÂ¿ªÆôµ÷¶È
  51:Drivers/SYSTEM/delay/delay.c ****  *      delay_ostimedly    :ÓÃÓÚOSÑÓÊ±,¿ÉÒÔÒýÆðÈÎÎñµ÷¶È.
  52:Drivers/SYSTEM/delay/delay.c ****  *
  53:Drivers/SYSTEM/delay/delay.c ****  *  ±¾Àý³Ì½ö×÷UCOSIIºÍUCOSIIIµÄÖ§³Ö,ÆäËûOS,Çë×ÔÐÐ²Î¿¼×ÅÒÆÖ²
  54:Drivers/SYSTEM/delay/delay.c ****  */
  55:Drivers/SYSTEM/delay/delay.c **** 
  56:Drivers/SYSTEM/delay/delay.c **** /* Ö§³ÖUCOSII */
  57:Drivers/SYSTEM/delay/delay.c **** #ifdef  OS_CRITICAL_METHOD                      /* OS_CRITICAL_METHOD¶¨ÒåÁË,ËµÃ÷ÒªÖ§³ÖUCOSII */
  58:Drivers/SYSTEM/delay/delay.c **** #define delay_osrunning     OSRunning           /* OSÊÇ·ñÔËÐÐ±ê¼Ç,0,²»ÔËÐÐ;1,ÔÚÔËÐÐ */
  59:Drivers/SYSTEM/delay/delay.c **** #define delay_ostickspersec OS_TICKS_PER_SEC    /* OSÊ±ÖÓ½ÚÅÄ,¼´Ã¿Ãëµ÷¶È´ÎÊý */
  60:Drivers/SYSTEM/delay/delay.c **** #define delay_osintnesting  OSIntNesting        /* ÖÐ¶ÏÇ¶Ì×¼¶±ð,¼´ÖÐ¶ÏÇ¶Ì×´ÎÊý */
  61:Drivers/SYSTEM/delay/delay.c **** #endif
  62:Drivers/SYSTEM/delay/delay.c **** 
  63:Drivers/SYSTEM/delay/delay.c **** /* Ö§³ÖUCOSIII */
  64:Drivers/SYSTEM/delay/delay.c **** #ifdef  CPU_CFG_CRITICAL_METHOD                 /* CPU_CFG_CRITICAL_METHOD¶¨ÒåÁË,ËµÃ÷ÒªÖ§³ÖUCOSIII 
  65:Drivers/SYSTEM/delay/delay.c **** #define delay_osrunning     OSRunning           /* OSÊÇ·ñÔËÐÐ±ê¼Ç,0,²»ÔËÐÐ;1,ÔÚÔËÐÐ */
  66:Drivers/SYSTEM/delay/delay.c **** #define delay_ostickspersec OSCfg_TickRate_Hz   /* OSÊ±ÖÓ½ÚÅÄ,¼´Ã¿Ãëµ÷¶È´ÎÊý */
  67:Drivers/SYSTEM/delay/delay.c **** #define delay_osintnesting  OSIntNestingCtr     /* ÖÐ¶ÏÇ¶Ì×¼¶±ð,¼´ÖÐ¶ÏÇ¶Ì×´ÎÊý */
  68:Drivers/SYSTEM/delay/delay.c **** #endif
  69:Drivers/SYSTEM/delay/delay.c **** 
  70:Drivers/SYSTEM/delay/delay.c **** 
  71:Drivers/SYSTEM/delay/delay.c **** /**
  72:Drivers/SYSTEM/delay/delay.c ****  * @brief       us¼¶ÑÓÊ±Ê±,¹Ø±ÕÈÎÎñµ÷¶È(·ÀÖ¹´ò¶Ïus¼¶ÑÓ³Ù)
  73:Drivers/SYSTEM/delay/delay.c ****  * @param       ÎÞ
  74:Drivers/SYSTEM/delay/delay.c ****  * @retval      ÎÞ
  75:Drivers/SYSTEM/delay/delay.c ****  */
  76:Drivers/SYSTEM/delay/delay.c **** static void delay_osschedlock(void)
  77:Drivers/SYSTEM/delay/delay.c **** {
  78:Drivers/SYSTEM/delay/delay.c **** #ifdef CPU_CFG_CRITICAL_METHOD  /* Ê¹ÓÃUCOSIII */
  79:Drivers/SYSTEM/delay/delay.c ****     OS_ERR err;
  80:Drivers/SYSTEM/delay/delay.c ****     OSSchedLock(&err);          /* UCOSIIIµÄ·½Ê½,½ûÖ¹µ÷¶È£¬·ÀÖ¹´ò¶ÏusÑÓÊ± */
  81:Drivers/SYSTEM/delay/delay.c **** #else                           /* ·ñÔòUCOSII */
  82:Drivers/SYSTEM/delay/delay.c ****     OSSchedLock();              /* UCOSIIµÄ·½Ê½,½ûÖ¹µ÷¶È£¬·ÀÖ¹´ò¶ÏusÑÓÊ± */
  83:Drivers/SYSTEM/delay/delay.c **** #endif
  84:Drivers/SYSTEM/delay/delay.c **** }
  85:Drivers/SYSTEM/delay/delay.c **** 
  86:Drivers/SYSTEM/delay/delay.c **** /**
  87:Drivers/SYSTEM/delay/delay.c ****  * @brief       us¼¶ÑÓÊ±Ê±,»Ö¸´ÈÎÎñµ÷¶È
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 3


  88:Drivers/SYSTEM/delay/delay.c ****  * @param       ÎÞ
  89:Drivers/SYSTEM/delay/delay.c ****  * @retval      ÎÞ
  90:Drivers/SYSTEM/delay/delay.c ****  */
  91:Drivers/SYSTEM/delay/delay.c **** static void delay_osschedunlock(void)
  92:Drivers/SYSTEM/delay/delay.c **** {
  93:Drivers/SYSTEM/delay/delay.c **** #ifdef CPU_CFG_CRITICAL_METHOD  /* Ê¹ÓÃUCOSIII */
  94:Drivers/SYSTEM/delay/delay.c ****     OS_ERR err;
  95:Drivers/SYSTEM/delay/delay.c ****     OSSchedUnlock(&err);        /* UCOSIIIµÄ·½Ê½,»Ö¸´µ÷¶È */
  96:Drivers/SYSTEM/delay/delay.c **** #else                           /* ·ñÔòUCOSII */
  97:Drivers/SYSTEM/delay/delay.c ****     OSSchedUnlock();            /* UCOSIIµÄ·½Ê½,»Ö¸´µ÷¶È */
  98:Drivers/SYSTEM/delay/delay.c **** #endif
  99:Drivers/SYSTEM/delay/delay.c **** }
 100:Drivers/SYSTEM/delay/delay.c **** 
 101:Drivers/SYSTEM/delay/delay.c **** /**
 102:Drivers/SYSTEM/delay/delay.c ****  * @brief       us¼¶ÑÓÊ±Ê±,»Ö¸´ÈÎÎñµ÷¶È
 103:Drivers/SYSTEM/delay/delay.c ****  * @param       ticks: ÑÓÊ±µÄ½ÚÅÄÊý
 104:Drivers/SYSTEM/delay/delay.c ****  * @retval      ÎÞ
 105:Drivers/SYSTEM/delay/delay.c ****  */
 106:Drivers/SYSTEM/delay/delay.c **** static void delay_ostimedly(uint32_t ticks)
 107:Drivers/SYSTEM/delay/delay.c **** {
 108:Drivers/SYSTEM/delay/delay.c **** #ifdef CPU_CFG_CRITICAL_METHOD
 109:Drivers/SYSTEM/delay/delay.c ****     OS_ERR err;
 110:Drivers/SYSTEM/delay/delay.c ****     OSTimeDly(ticks, OS_OPT_TIME_PERIODIC, &err);   /* UCOSIIIÑÓÊ±²ÉÓÃÖÜÆÚÄ£Ê½ */
 111:Drivers/SYSTEM/delay/delay.c **** #else
 112:Drivers/SYSTEM/delay/delay.c ****     OSTimeDly(ticks);                               /* UCOSIIÑÓÊ± */
 113:Drivers/SYSTEM/delay/delay.c **** #endif
 114:Drivers/SYSTEM/delay/delay.c **** }
 115:Drivers/SYSTEM/delay/delay.c **** 
 116:Drivers/SYSTEM/delay/delay.c **** /**
 117:Drivers/SYSTEM/delay/delay.c ****  * @brief       systickÖÐ¶Ï·þÎñº¯Êý,Ê¹ÓÃOSÊ±ÓÃµ½
 118:Drivers/SYSTEM/delay/delay.c ****  * @param       ticks: ÑÓÊ±µÄ½ÚÅÄÊý
 119:Drivers/SYSTEM/delay/delay.c ****  * @retval      ÎÞ
 120:Drivers/SYSTEM/delay/delay.c ****  */
 121:Drivers/SYSTEM/delay/delay.c **** void SysTick_Handler(void)
 122:Drivers/SYSTEM/delay/delay.c **** {
 123:Drivers/SYSTEM/delay/delay.c ****     if (delay_osrunning == 1)   /* OS¿ªÊ¼ÅÜÁË,²ÅÖ´ÐÐÕý³£µÄµ÷¶È´¦Àí */
 124:Drivers/SYSTEM/delay/delay.c ****     {
 125:Drivers/SYSTEM/delay/delay.c ****         OSIntEnter();           /* ½øÈëÖÐ¶Ï */
 126:Drivers/SYSTEM/delay/delay.c ****         OSTimeTick();           /* µ÷ÓÃucosµÄÊ±ÖÓ·þÎñ³ÌÐò */
 127:Drivers/SYSTEM/delay/delay.c ****         OSIntExit();            /* ´¥·¢ÈÎÎñÇÐ»»ÈíÖÐ¶Ï */
 128:Drivers/SYSTEM/delay/delay.c ****     }
 129:Drivers/SYSTEM/delay/delay.c ****     HAL_IncTick();
 130:Drivers/SYSTEM/delay/delay.c **** }
 131:Drivers/SYSTEM/delay/delay.c **** #endif
 132:Drivers/SYSTEM/delay/delay.c **** 
 133:Drivers/SYSTEM/delay/delay.c **** /**
 134:Drivers/SYSTEM/delay/delay.c ****  * @brief       ³õÊ¼»¯ÑÓ³Ùº¯Êý
 135:Drivers/SYSTEM/delay/delay.c ****  * @param       sysclk: ÏµÍ³Ê±ÖÓÆµÂÊ, ¼´CPUÆµÂÊ(HCLK)
 136:Drivers/SYSTEM/delay/delay.c ****  * @retval      ÎÞ
 137:Drivers/SYSTEM/delay/delay.c ****  */
 138:Drivers/SYSTEM/delay/delay.c **** void delay_init(uint16_t sysclk)
 139:Drivers/SYSTEM/delay/delay.c **** {
  29              		.loc 1 139 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
 140:Drivers/SYSTEM/delay/delay.c **** #if SYS_SUPPORT_OS /* Èç¹ûÐèÒªÖ§³ÖOS. */
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 4


 141:Drivers/SYSTEM/delay/delay.c ****     uint32_t reload;
 142:Drivers/SYSTEM/delay/delay.c **** #endif
 143:Drivers/SYSTEM/delay/delay.c ****     SysTick->CTRL = 0;                                          /* ÇåSystick×´Ì¬£¬ÒÔ±ãÏÂÒ»²½ÖØÉè£¬È
  33              		.loc 1 143 5 view .LVU1
  34              		.loc 1 143 19 is_stmt 0 view .LVU2
  35 0000 0023     		movs	r3, #0
  36 0002 4FF0E022 		mov	r2, #-536813568
 139:Drivers/SYSTEM/delay/delay.c **** #if SYS_SUPPORT_OS /* Èç¹ûÐèÒªÖ§³ÖOS. */
  37              		.loc 1 139 1 view .LVU3
  38 0006 10B5     		push	{r4, lr}
  39              	.LCFI0:
  40              		.cfi_def_cfa_offset 8
  41              		.cfi_offset 4, -8
  42              		.cfi_offset 14, -4
 139:Drivers/SYSTEM/delay/delay.c **** #if SYS_SUPPORT_OS /* Èç¹ûÐèÒªÖ§³ÖOS. */
  43              		.loc 1 139 1 view .LVU4
  44 0008 0446     		mov	r4, r0
  45              		.loc 1 143 19 view .LVU5
  46 000a 1361     		str	r3, [r2, #16]
 144:Drivers/SYSTEM/delay/delay.c ****     HAL_SYSTICK_CLKSourceConfig(SYSTICK_CLKSOURCE_HCLK_DIV8);   /* SYSTICKÊ¹ÓÃÄÚºËÊ±ÖÓÔ´8·ÖÆµ,Òòsys
  47              		.loc 1 144 5 is_stmt 1 view .LVU6
  48 000c 1846     		mov	r0, r3
  49              	.LVL1:
  50              		.loc 1 144 5 is_stmt 0 view .LVU7
  51 000e FFF7FEFF 		bl	HAL_SYSTICK_CLKSourceConfig
  52              	.LVL2:
 145:Drivers/SYSTEM/delay/delay.c **** 
 146:Drivers/SYSTEM/delay/delay.c ****     g_fac_us = sysclk / 8;                                      /* ²»ÂÛÊÇ·ñÊ¹ÓÃOS,g_fac_us¶¼ÐèÒªÊ¹Ó
  53              		.loc 1 146 5 is_stmt 1 view .LVU8
  54              		.loc 1 146 14 is_stmt 0 view .LVU9
  55 0012 024B     		ldr	r3, .L4
  56 0014 E408     		lsrs	r4, r4, #3
  57 0016 1C80     		strh	r4, [r3]	@ movhi
 147:Drivers/SYSTEM/delay/delay.c **** #if SYS_SUPPORT_OS                                              /* Èç¹ûÐèÒªÖ§³ÖOS. */
 148:Drivers/SYSTEM/delay/delay.c ****     reload = sysclk / 8;                                        /* Ã¿ÃëÖÓµÄ¼ÆÊý´ÎÊý µ¥Î»ÎªM */
 149:Drivers/SYSTEM/delay/delay.c ****     reload *= 1000000 / delay_ostickspersec;                    /* ¸ù¾Ýdelay_ostickspersecÉè¶¨Òç³öÊ
 150:Drivers/SYSTEM/delay/delay.c ****                                                                  * reloadÎª24Î»¼Ä´æÆ÷,×î´óÖµ:167772
 151:Drivers/SYSTEM/delay/delay.c ****                                                                  */
 152:Drivers/SYSTEM/delay/delay.c ****     g_fac_ms = 1000 / delay_ostickspersec;                      /* ´ú±íOS¿ÉÒÔÑÓÊ±µÄ×îÉÙµ¥Î» */
 153:Drivers/SYSTEM/delay/delay.c ****     SysTick->CTRL |= 1 << 1;                                    /* ¿ªÆôSYSTICKÖÐ¶Ï */
 154:Drivers/SYSTEM/delay/delay.c ****     SysTick->LOAD = reload;                                     /* Ã¿1/delay_ostickspersecÃëÖÐ¶ÏÒ»´
 155:Drivers/SYSTEM/delay/delay.c ****     SysTick->CTRL |= 1 << 0;                                    /* ¿ªÆôSYSTICK */
 156:Drivers/SYSTEM/delay/delay.c **** #endif
 157:Drivers/SYSTEM/delay/delay.c **** }
  58              		.loc 1 157 1 view .LVU10
  59 0018 10BD     		pop	{r4, pc}
  60              	.L5:
  61 001a 00BF     		.align	2
  62              	.L4:
  63 001c 00000000 		.word	g_fac_us
  64              		.cfi_endproc
  65              	.LFE65:
  67              		.section	.text.delay_us,"ax",%progbits
  68              		.align	1
  69              		.p2align 2,,3
  70              		.global	delay_us
  71              		.syntax unified
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 5


  72              		.thumb
  73              		.thumb_func
  75              	delay_us:
  76              	.LVL3:
  77              	.LFB66:
 158:Drivers/SYSTEM/delay/delay.c **** 
 159:Drivers/SYSTEM/delay/delay.c **** #if SYS_SUPPORT_OS  /* Èç¹ûÐèÒªÖ§³ÖOS, ÓÃÒÔÏÂ´úÂë */
 160:Drivers/SYSTEM/delay/delay.c **** 
 161:Drivers/SYSTEM/delay/delay.c **** /**
 162:Drivers/SYSTEM/delay/delay.c ****  * @brief       ÑÓÊ±nus
 163:Drivers/SYSTEM/delay/delay.c ****  * @param       nus: ÒªÑÓÊ±µÄusÊý.
 164:Drivers/SYSTEM/delay/delay.c ****  * @note        nusÈ¡Öµ·¶Î§: 0 ~ 477218588(×î´óÖµ¼´2^32 / g_fac_us @g_fac_us = 9)
 165:Drivers/SYSTEM/delay/delay.c ****  * @retval      ÎÞ
 166:Drivers/SYSTEM/delay/delay.c ****  */
 167:Drivers/SYSTEM/delay/delay.c **** void delay_us(uint32_t nus)
 168:Drivers/SYSTEM/delay/delay.c **** {
 169:Drivers/SYSTEM/delay/delay.c ****     uint32_t ticks;
 170:Drivers/SYSTEM/delay/delay.c ****     uint32_t told, tnow, tcnt = 0;
 171:Drivers/SYSTEM/delay/delay.c ****     uint32_t reload;
 172:Drivers/SYSTEM/delay/delay.c ****     reload = SysTick->LOAD;     /* LOADµÄÖµ */
 173:Drivers/SYSTEM/delay/delay.c ****     ticks = nus * g_fac_us;     /* ÐèÒªµÄ½ÚÅÄÊý */
 174:Drivers/SYSTEM/delay/delay.c ****     delay_osschedlock();        /* ×èÖ¹OSµ÷¶È£¬·ÀÖ¹´ò¶ÏusÑÓÊ± */
 175:Drivers/SYSTEM/delay/delay.c ****     told = SysTick->VAL;        /* ¸Õ½øÈëÊ±µÄ¼ÆÊýÆ÷Öµ */
 176:Drivers/SYSTEM/delay/delay.c **** 
 177:Drivers/SYSTEM/delay/delay.c ****     while (1)
 178:Drivers/SYSTEM/delay/delay.c ****     {
 179:Drivers/SYSTEM/delay/delay.c ****         tnow = SysTick->VAL;
 180:Drivers/SYSTEM/delay/delay.c **** 
 181:Drivers/SYSTEM/delay/delay.c ****         if (tnow != told)
 182:Drivers/SYSTEM/delay/delay.c ****         {
 183:Drivers/SYSTEM/delay/delay.c ****             if (tnow < told)
 184:Drivers/SYSTEM/delay/delay.c ****             {
 185:Drivers/SYSTEM/delay/delay.c ****                 tcnt += told - tnow;    /* ÕâÀï×¢ÒâÒ»ÏÂSYSTICKÊÇÒ»¸öµÝ¼õµÄ¼ÆÊýÆ÷¾Í¿ÉÒÔÁË. */
 186:Drivers/SYSTEM/delay/delay.c ****             }
 187:Drivers/SYSTEM/delay/delay.c ****             else
 188:Drivers/SYSTEM/delay/delay.c ****             {
 189:Drivers/SYSTEM/delay/delay.c ****                 tcnt += reload - tnow + told;
 190:Drivers/SYSTEM/delay/delay.c ****             }
 191:Drivers/SYSTEM/delay/delay.c **** 
 192:Drivers/SYSTEM/delay/delay.c ****             told = tnow;
 193:Drivers/SYSTEM/delay/delay.c **** 
 194:Drivers/SYSTEM/delay/delay.c ****             if (tcnt >= ticks) break;   /* Ê±¼ä³¬¹ý/µÈÓÚÒªÑÓ³ÙµÄÊ±¼ä,ÔòÍË³ö. */
 195:Drivers/SYSTEM/delay/delay.c ****         }
 196:Drivers/SYSTEM/delay/delay.c ****     }
 197:Drivers/SYSTEM/delay/delay.c **** 
 198:Drivers/SYSTEM/delay/delay.c ****     delay_osschedunlock();              /* »Ö¸´OSµ÷¶È */
 199:Drivers/SYSTEM/delay/delay.c **** }
 200:Drivers/SYSTEM/delay/delay.c **** 
 201:Drivers/SYSTEM/delay/delay.c **** /**
 202:Drivers/SYSTEM/delay/delay.c ****  * @brief       ÑÓÊ±nms
 203:Drivers/SYSTEM/delay/delay.c ****  * @param       nms: ÒªÑÓÊ±µÄmsÊý (0< nms <= 65535)
 204:Drivers/SYSTEM/delay/delay.c ****  * @retval      ÎÞ
 205:Drivers/SYSTEM/delay/delay.c ****  */
 206:Drivers/SYSTEM/delay/delay.c **** void delay_ms(uint16_t nms)
 207:Drivers/SYSTEM/delay/delay.c **** {
 208:Drivers/SYSTEM/delay/delay.c ****     if (delay_osrunning && delay_osintnesting == 0)     /* Èç¹ûOSÒÑ¾­ÔÚÅÜÁË,²¢ÇÒ²»ÊÇÔÚÖÐ¶ÏÀïÃæ(ÖÐ¶Ï
 209:Drivers/SYSTEM/delay/delay.c ****     {
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 6


 210:Drivers/SYSTEM/delay/delay.c ****         if (nms >= g_fac_ms)                            /* ÑÓÊ±µÄÊ±¼ä´óÓÚOSµÄ×îÉÙÊ±¼äÖÜÆÚ */
 211:Drivers/SYSTEM/delay/delay.c ****         {
 212:Drivers/SYSTEM/delay/delay.c ****             delay_ostimedly(nms / g_fac_ms);            /* OSÑÓÊ± */
 213:Drivers/SYSTEM/delay/delay.c ****         }
 214:Drivers/SYSTEM/delay/delay.c **** 
 215:Drivers/SYSTEM/delay/delay.c ****         nms %= g_fac_ms;                                /* OSÒÑ¾­ÎÞ·¨Ìá¹©ÕâÃ´Ð¡µÄÑÓÊ±ÁË,²ÉÓÃÆÕÍ¨·½Ê
 216:Drivers/SYSTEM/delay/delay.c ****     }
 217:Drivers/SYSTEM/delay/delay.c **** 
 218:Drivers/SYSTEM/delay/delay.c ****     delay_us((uint32_t)(nms * 1000));                   /* ÆÕÍ¨·½Ê½ÑÓÊ± */
 219:Drivers/SYSTEM/delay/delay.c **** }
 220:Drivers/SYSTEM/delay/delay.c **** 
 221:Drivers/SYSTEM/delay/delay.c **** #else  /* ²»Ê¹ÓÃOSÊ±, ÓÃÒÔÏÂ´úÂë */
 222:Drivers/SYSTEM/delay/delay.c **** 
 223:Drivers/SYSTEM/delay/delay.c **** /**
 224:Drivers/SYSTEM/delay/delay.c ****  * @brief       ÑÓÊ±nus
 225:Drivers/SYSTEM/delay/delay.c ****  * @param       nus: ÒªÑÓÊ±µÄusÊý.
 226:Drivers/SYSTEM/delay/delay.c ****  * @note        ×¢Òâ: nusµÄÖµ,²»Òª´óÓÚ1864135us(×î´óÖµ¼´2^24 / g_fac_us  @g_fac_us = 9)
 227:Drivers/SYSTEM/delay/delay.c ****  * @retval      ÎÞ
 228:Drivers/SYSTEM/delay/delay.c ****  */
 229:Drivers/SYSTEM/delay/delay.c **** void delay_us(uint32_t nus)
 230:Drivers/SYSTEM/delay/delay.c **** {
  78              		.loc 1 230 1 is_stmt 1 view -0
  79              		.cfi_startproc
  80              		@ args = 0, pretend = 0, frame = 0
  81              		@ frame_needed = 0, uses_anonymous_args = 0
  82              		@ link register save eliminated.
 231:Drivers/SYSTEM/delay/delay.c ****     uint32_t temp;
  83              		.loc 1 231 5 view .LVU12
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->LOAD = nus * g_fac_us; /* Ê±¼ä¼ÓÔØ */
  84              		.loc 1 232 5 view .LVU13
  85              		.loc 1 232 19 is_stmt 0 view .LVU14
  86 0000 4FF0E022 		mov	r2, #-536813568
 233:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
  87              		.loc 1 233 18 view .LVU15
  88 0004 0021     		movs	r1, #0
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->LOAD = nus * g_fac_us; /* Ê±¼ä¼ÓÔØ */
  89              		.loc 1 232 25 view .LVU16
  90 0006 0B4B     		ldr	r3, .L10
  91 0008 1B88     		ldrh	r3, [r3]
  92 000a 00FB03F3 		mul	r3, r0, r3
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->LOAD = nus * g_fac_us; /* Ê±¼ä¼ÓÔØ */
  93              		.loc 1 232 19 view .LVU17
  94 000e 5361     		str	r3, [r2, #20]
  95              		.loc 1 233 5 is_stmt 1 view .LVU18
  96              		.loc 1 233 18 is_stmt 0 view .LVU19
  97 0010 9161     		str	r1, [r2, #24]
 234:Drivers/SYSTEM/delay/delay.c ****     SysTick->CTRL |= 1 << 0 ;       /* ¿ªÊ¼µ¹Êý */
  98              		.loc 1 234 5 is_stmt 1 view .LVU20
  99              		.loc 1 234 12 is_stmt 0 view .LVU21
 100 0012 1369     		ldr	r3, [r2, #16]
 101              		.loc 1 234 19 view .LVU22
 102 0014 43F00103 		orr	r3, r3, #1
 103 0018 1361     		str	r3, [r2, #16]
 104              	.L7:
 235:Drivers/SYSTEM/delay/delay.c **** 
 236:Drivers/SYSTEM/delay/delay.c ****     do
 105              		.loc 1 236 5 is_stmt 1 discriminator 1 view .LVU23
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 7


 237:Drivers/SYSTEM/delay/delay.c ****     {
 238:Drivers/SYSTEM/delay/delay.c ****         temp = SysTick->CTRL;
 106              		.loc 1 238 9 discriminator 1 view .LVU24
 107              		.loc 1 238 14 is_stmt 0 discriminator 1 view .LVU25
 108 001a 1369     		ldr	r3, [r2, #16]
 109              	.LVL4:
 239:Drivers/SYSTEM/delay/delay.c ****     } while ((temp & 0x01) && !(temp & (1 << 16))); /* CTRL.ENABLEÎ»±ØÐëÎª1, ²¢µÈ´ýÊ±¼äµ½´ï */
 110              		.loc 1 239 28 is_stmt 1 discriminator 1 view .LVU26
 111 001c 03F00113 		and	r3, r3, #65537
 112              	.LVL5:
 113              		.loc 1 239 28 is_stmt 0 discriminator 1 view .LVU27
 114 0020 012B     		cmp	r3, #1
 115 0022 FAD0     		beq	.L7
 240:Drivers/SYSTEM/delay/delay.c **** 
 241:Drivers/SYSTEM/delay/delay.c ****     SysTick->CTRL &= ~(1 << 0) ;    /* ¹Ø±ÕSYSTICK */
 116              		.loc 1 241 5 is_stmt 1 view .LVU28
 242:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0X00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 117              		.loc 1 242 18 is_stmt 0 view .LVU29
 118 0024 0021     		movs	r1, #0
 241:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0X00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 119              		.loc 1 241 12 view .LVU30
 120 0026 1369     		ldr	r3, [r2, #16]
 241:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0X00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 121              		.loc 1 241 19 view .LVU31
 122 0028 23F00103 		bic	r3, r3, #1
 123 002c 1361     		str	r3, [r2, #16]
 124              		.loc 1 242 5 is_stmt 1 view .LVU32
 125              		.loc 1 242 18 is_stmt 0 view .LVU33
 126 002e 9161     		str	r1, [r2, #24]
 243:Drivers/SYSTEM/delay/delay.c **** }
 127              		.loc 1 243 1 view .LVU34
 128 0030 7047     		bx	lr
 129              	.L11:
 130 0032 00BF     		.align	2
 131              	.L10:
 132 0034 00000000 		.word	g_fac_us
 133              		.cfi_endproc
 134              	.LFE66:
 136              		.section	.text.delay_ms,"ax",%progbits
 137              		.align	1
 138              		.p2align 2,,3
 139              		.global	delay_ms
 140              		.syntax unified
 141              		.thumb
 142              		.thumb_func
 144              	delay_ms:
 145              	.LVL6:
 146              	.LFB67:
 244:Drivers/SYSTEM/delay/delay.c **** 
 245:Drivers/SYSTEM/delay/delay.c **** /**
 246:Drivers/SYSTEM/delay/delay.c ****  * @brief       ÑÓÊ±nms
 247:Drivers/SYSTEM/delay/delay.c ****  * @param       nms: ÒªÑÓÊ±µÄmsÊý (0< nms <= 65535)
 248:Drivers/SYSTEM/delay/delay.c ****  * @retval      ÎÞ
 249:Drivers/SYSTEM/delay/delay.c ****  */
 250:Drivers/SYSTEM/delay/delay.c **** void delay_ms(uint16_t nms)
 251:Drivers/SYSTEM/delay/delay.c **** {
 147              		.loc 1 251 1 is_stmt 1 view -0
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 8


 148              		.cfi_startproc
 149              		@ args = 0, pretend = 0, frame = 0
 150              		@ frame_needed = 0, uses_anonymous_args = 0
 151              		@ link register save eliminated.
 252:Drivers/SYSTEM/delay/delay.c ****     uint32_t repeat = nms / 1000;   /*  ÕâÀïÓÃ1000,ÊÇ¿¼ÂÇµ½¿ÉÄÜÓÐ³¬ÆµÓ¦ÓÃ,
 152              		.loc 1 252 5 view .LVU36
 253:Drivers/SYSTEM/delay/delay.c ****                                      *  ±ÈÈç128MhzµÄÊ±ºò, delay_us×î´óÖ»ÄÜÑÓÊ±1048576us×óÓÒÁË
 254:Drivers/SYSTEM/delay/delay.c ****                                      */
 255:Drivers/SYSTEM/delay/delay.c ****     uint32_t remain = nms % 1000;
 153              		.loc 1 255 27 is_stmt 0 view .LVU37
 154 0000 4FF47A73 		mov	r3, #1000
 252:Drivers/SYSTEM/delay/delay.c ****     uint32_t repeat = nms / 1000;   /*  ÕâÀïÓÃ1000,ÊÇ¿¼ÂÇµ½¿ÉÄÜÓÐ³¬ÆµÓ¦ÓÃ,
 155              		.loc 1 252 27 view .LVU38
 156 0004 2249     		ldr	r1, .L28
 251:Drivers/SYSTEM/delay/delay.c ****     uint32_t repeat = nms / 1000;   /*  ÕâÀïÓÃ1000,ÊÇ¿¼ÂÇµ½¿ÉÄÜÓÐ³¬ÆµÓ¦ÓÃ,
 157              		.loc 1 251 1 view .LVU39
 158 0006 30B4     		push	{r4, r5}
 159              	.LCFI1:
 160              		.cfi_def_cfa_offset 8
 161              		.cfi_offset 4, -8
 162              		.cfi_offset 5, -4
 252:Drivers/SYSTEM/delay/delay.c ****     uint32_t repeat = nms / 1000;   /*  ÕâÀïÓÃ1000,ÊÇ¿¼ÂÇµ½¿ÉÄÜÓÐ³¬ÆµÓ¦ÓÃ,
 163              		.loc 1 252 27 view .LVU40
 164 0008 A1FB0021 		umull	r2, r1, r1, r0
 165 000c 8D09     		lsrs	r5, r1, #6
 166              		.loc 1 255 27 view .LVU41
 167 000e 03FB1505 		mls	r5, r3, r5, r0
 168              	.LVL7:
 169              		.loc 1 255 5 is_stmt 1 view .LVU42
 256:Drivers/SYSTEM/delay/delay.c **** 
 257:Drivers/SYSTEM/delay/delay.c ****     while (repeat)
 170              		.loc 1 257 12 is_stmt 0 view .LVU43
 171 0012 9842     		cmp	r0, r3
 255:Drivers/SYSTEM/delay/delay.c **** 
 172              		.loc 1 255 27 view .LVU44
 173 0014 ADB2     		uxth	r5, r5
 174              	.LVL8:
 175              		.loc 1 257 5 is_stmt 1 view .LVU45
 176              		.loc 1 257 12 view .LVU46
 177 0016 1AD3     		bcc	.L13
 178              	.LBB6:
 179              	.LBB7:
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 180              		.loc 1 232 19 is_stmt 0 view .LVU47
 181 0018 4FF0E022 		mov	r2, #-536813568
 233:Drivers/SYSTEM/delay/delay.c ****     SysTick->CTRL |= 1 << 0 ;       /* ¿ªÊ¼µ¹Êý */
 182              		.loc 1 233 18 view .LVU48
 183 001c 0020     		movs	r0, #0
 184              	.LVL9:
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 185              		.loc 1 232 25 view .LVU49
 186 001e 1D4B     		ldr	r3, .L28+4
 187 0020 8909     		lsrs	r1, r1, #6
 188              	.LVL10:
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 189              		.loc 1 232 25 view .LVU50
 190 0022 1C88     		ldrh	r4, [r3]
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 9


 191 0024 1C4B     		ldr	r3, .L28+8
 192 0026 03FB04F4 		mul	r4, r3, r4
 193              	.LVL11:
 194              	.L15:
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 195              		.loc 1 232 25 view .LVU51
 196              	.LBE7:
 197              	.LBE6:
 258:Drivers/SYSTEM/delay/delay.c ****     {
 259:Drivers/SYSTEM/delay/delay.c ****         delay_us(1000 * 1000);      /* ÀûÓÃdelay_us ÊµÏÖ 1000ms ÑÓÊ± */
 198              		.loc 1 259 9 is_stmt 1 view .LVU52
 199              	.LBB10:
 200              	.LBI6:
 229:Drivers/SYSTEM/delay/delay.c **** {
 201              		.loc 1 229 6 view .LVU53
 202              	.LBB8:
 231:Drivers/SYSTEM/delay/delay.c ****     SysTick->LOAD = nus * g_fac_us; /* Ê±¼ä¼ÓÔØ */
 203              		.loc 1 231 5 view .LVU54
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 204              		.loc 1 232 5 view .LVU55
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 205              		.loc 1 232 19 is_stmt 0 view .LVU56
 206 002a 5461     		str	r4, [r2, #20]
 233:Drivers/SYSTEM/delay/delay.c ****     SysTick->CTRL |= 1 << 0 ;       /* ¿ªÊ¼µ¹Êý */
 207              		.loc 1 233 5 is_stmt 1 view .LVU57
 233:Drivers/SYSTEM/delay/delay.c ****     SysTick->CTRL |= 1 << 0 ;       /* ¿ªÊ¼µ¹Êý */
 208              		.loc 1 233 18 is_stmt 0 view .LVU58
 209 002c 9061     		str	r0, [r2, #24]
 234:Drivers/SYSTEM/delay/delay.c **** 
 210              		.loc 1 234 5 is_stmt 1 view .LVU59
 234:Drivers/SYSTEM/delay/delay.c **** 
 211              		.loc 1 234 12 is_stmt 0 view .LVU60
 212 002e 1369     		ldr	r3, [r2, #16]
 234:Drivers/SYSTEM/delay/delay.c **** 
 213              		.loc 1 234 19 view .LVU61
 214 0030 43F00103 		orr	r3, r3, #1
 215 0034 1361     		str	r3, [r2, #16]
 216              	.L14:
 236:Drivers/SYSTEM/delay/delay.c ****     {
 217              		.loc 1 236 5 is_stmt 1 view .LVU62
 238:Drivers/SYSTEM/delay/delay.c ****     } while ((temp & 0x01) && !(temp & (1 << 16))); /* CTRL.ENABLEÎ»±ØÐëÎª1, ²¢µÈ´ýÊ±¼äµ½´ï */
 218              		.loc 1 238 9 view .LVU63
 238:Drivers/SYSTEM/delay/delay.c ****     } while ((temp & 0x01) && !(temp & (1 << 16))); /* CTRL.ENABLEÎ»±ØÐëÎª1, ²¢µÈ´ýÊ±¼äµ½´ï */
 219              		.loc 1 238 14 is_stmt 0 view .LVU64
 220 0036 1369     		ldr	r3, [r2, #16]
 221              	.LVL12:
 239:Drivers/SYSTEM/delay/delay.c **** 
 222              		.loc 1 239 28 is_stmt 1 view .LVU65
 223 0038 03F00113 		and	r3, r3, #65537
 224              	.LVL13:
 239:Drivers/SYSTEM/delay/delay.c **** 
 225              		.loc 1 239 28 is_stmt 0 view .LVU66
 226 003c 012B     		cmp	r3, #1
 227 003e FAD0     		beq	.L14
 241:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0X00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 228              		.loc 1 241 5 is_stmt 1 view .LVU67
 241:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0X00;            /* Çå¿Õ¼ÆÊýÆ÷ */
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 10


 229              		.loc 1 241 12 is_stmt 0 view .LVU68
 230 0040 1369     		ldr	r3, [r2, #16]
 231              	.LBE8:
 232              	.LBE10:
 257:Drivers/SYSTEM/delay/delay.c ****     {
 233              		.loc 1 257 12 view .LVU69
 234 0042 0139     		subs	r1, r1, #1
 235              	.LVL14:
 236              	.LBB11:
 237              	.LBB9:
 241:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0X00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 238              		.loc 1 241 19 view .LVU70
 239 0044 23F00103 		bic	r3, r3, #1
 240 0048 1361     		str	r3, [r2, #16]
 242:Drivers/SYSTEM/delay/delay.c **** }
 241              		.loc 1 242 5 is_stmt 1 view .LVU71
 242:Drivers/SYSTEM/delay/delay.c **** }
 242              		.loc 1 242 18 is_stmt 0 view .LVU72
 243 004a 9061     		str	r0, [r2, #24]
 244              	.LVL15:
 242:Drivers/SYSTEM/delay/delay.c **** }
 245              		.loc 1 242 18 view .LVU73
 246              	.LBE9:
 247              	.LBE11:
 260:Drivers/SYSTEM/delay/delay.c ****         repeat--;
 248              		.loc 1 260 9 is_stmt 1 view .LVU74
 257:Drivers/SYSTEM/delay/delay.c ****     {
 249              		.loc 1 257 12 view .LVU75
 250 004c EDD1     		bne	.L15
 251              	.L13:
 261:Drivers/SYSTEM/delay/delay.c ****     }
 262:Drivers/SYSTEM/delay/delay.c **** 
 263:Drivers/SYSTEM/delay/delay.c ****     if (remain)
 252              		.loc 1 263 5 view .LVU76
 253              		.loc 1 263 8 is_stmt 0 view .LVU77
 254 004e 0DB9     		cbnz	r5, .L27
 264:Drivers/SYSTEM/delay/delay.c ****     {
 265:Drivers/SYSTEM/delay/delay.c ****         delay_us(remain * 1000);    /* ÀûÓÃdelay_us, °ÑÎ²ÊýÑÓÊ±(remain ms)¸ø×öÁË */
 266:Drivers/SYSTEM/delay/delay.c ****     }
 267:Drivers/SYSTEM/delay/delay.c **** }
 255              		.loc 1 267 1 view .LVU78
 256 0050 30BC     		pop	{r4, r5}
 257              	.LCFI2:
 258              		.cfi_remember_state
 259              		.cfi_restore 5
 260              		.cfi_restore 4
 261              		.cfi_def_cfa_offset 0
 262              	.LVL16:
 263              		.loc 1 267 1 view .LVU79
 264 0052 7047     		bx	lr
 265              	.LVL17:
 266              	.L27:
 267              	.LCFI3:
 268              		.cfi_restore_state
 265:Drivers/SYSTEM/delay/delay.c ****     }
 269              		.loc 1 265 9 is_stmt 1 view .LVU80
 270              	.LBB12:
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 11


 271              	.LBI12:
 229:Drivers/SYSTEM/delay/delay.c **** {
 272              		.loc 1 229 6 view .LVU81
 273              	.LBB13:
 231:Drivers/SYSTEM/delay/delay.c ****     SysTick->LOAD = nus * g_fac_us; /* Ê±¼ä¼ÓÔØ */
 274              		.loc 1 231 5 view .LVU82
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 275              		.loc 1 232 5 view .LVU83
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 276              		.loc 1 232 25 is_stmt 0 view .LVU84
 277 0054 4FF47A70 		mov	r0, #1000
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 278              		.loc 1 232 19 view .LVU85
 279 0058 4FF0E022 		mov	r2, #-536813568
 233:Drivers/SYSTEM/delay/delay.c ****     SysTick->CTRL |= 1 << 0 ;       /* ¿ªÊ¼µ¹Êý */
 280              		.loc 1 233 18 view .LVU86
 281 005c 0021     		movs	r1, #0
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 282              		.loc 1 232 25 view .LVU87
 283 005e 0D4B     		ldr	r3, .L28+4
 284 0060 1B88     		ldrh	r3, [r3]
 285 0062 05FB03F3 		mul	r3, r5, r3
 286 0066 00FB03F3 		mul	r3, r0, r3
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 287              		.loc 1 232 19 view .LVU88
 288 006a 5361     		str	r3, [r2, #20]
 233:Drivers/SYSTEM/delay/delay.c ****     SysTick->CTRL |= 1 << 0 ;       /* ¿ªÊ¼µ¹Êý */
 289              		.loc 1 233 5 is_stmt 1 view .LVU89
 233:Drivers/SYSTEM/delay/delay.c ****     SysTick->CTRL |= 1 << 0 ;       /* ¿ªÊ¼µ¹Êý */
 290              		.loc 1 233 18 is_stmt 0 view .LVU90
 291 006c 9161     		str	r1, [r2, #24]
 234:Drivers/SYSTEM/delay/delay.c **** 
 292              		.loc 1 234 5 is_stmt 1 view .LVU91
 234:Drivers/SYSTEM/delay/delay.c **** 
 293              		.loc 1 234 12 is_stmt 0 view .LVU92
 294 006e 1369     		ldr	r3, [r2, #16]
 234:Drivers/SYSTEM/delay/delay.c **** 
 295              		.loc 1 234 19 view .LVU93
 296 0070 43F00103 		orr	r3, r3, #1
 297 0074 1361     		str	r3, [r2, #16]
 298              	.L17:
 236:Drivers/SYSTEM/delay/delay.c ****     {
 299              		.loc 1 236 5 is_stmt 1 view .LVU94
 238:Drivers/SYSTEM/delay/delay.c ****     } while ((temp & 0x01) && !(temp & (1 << 16))); /* CTRL.ENABLEÎ»±ØÐëÎª1, ²¢µÈ´ýÊ±¼äµ½´ï */
 300              		.loc 1 238 9 view .LVU95
 238:Drivers/SYSTEM/delay/delay.c ****     } while ((temp & 0x01) && !(temp & (1 << 16))); /* CTRL.ENABLEÎ»±ØÐëÎª1, ²¢µÈ´ýÊ±¼äµ½´ï */
 301              		.loc 1 238 14 is_stmt 0 view .LVU96
 302 0076 1369     		ldr	r3, [r2, #16]
 303              	.LVL18:
 239:Drivers/SYSTEM/delay/delay.c **** 
 304              		.loc 1 239 28 is_stmt 1 view .LVU97
 305 0078 03F00113 		and	r3, r3, #65537
 306              	.LVL19:
 239:Drivers/SYSTEM/delay/delay.c **** 
 307              		.loc 1 239 28 is_stmt 0 view .LVU98
 308 007c 012B     		cmp	r3, #1
 309 007e FAD0     		beq	.L17
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 12


 241:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0X00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 310              		.loc 1 241 5 is_stmt 1 view .LVU99
 311              	.LBE13:
 312              	.LBE12:
 313              		.loc 1 267 1 is_stmt 0 view .LVU100
 314 0080 30BC     		pop	{r4, r5}
 315              	.LCFI4:
 316              		.cfi_restore 5
 317              		.cfi_restore 4
 318              		.cfi_def_cfa_offset 0
 319              	.LVL20:
 320              	.LBB15:
 321              	.LBB14:
 242:Drivers/SYSTEM/delay/delay.c **** }
 322              		.loc 1 242 18 view .LVU101
 323 0082 0021     		movs	r1, #0
 241:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0X00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 324              		.loc 1 241 12 view .LVU102
 325 0084 1369     		ldr	r3, [r2, #16]
 241:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0X00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 326              		.loc 1 241 19 view .LVU103
 327 0086 23F00103 		bic	r3, r3, #1
 328 008a 1361     		str	r3, [r2, #16]
 242:Drivers/SYSTEM/delay/delay.c **** }
 329              		.loc 1 242 5 is_stmt 1 view .LVU104
 242:Drivers/SYSTEM/delay/delay.c **** }
 330              		.loc 1 242 18 is_stmt 0 view .LVU105
 331 008c 9161     		str	r1, [r2, #24]
 332              	.LVL21:
 242:Drivers/SYSTEM/delay/delay.c **** }
 333              		.loc 1 242 18 view .LVU106
 334              	.LBE14:
 335              	.LBE15:
 336              		.loc 1 267 1 view .LVU107
 337 008e 7047     		bx	lr
 338              	.L29:
 339              		.align	2
 340              	.L28:
 341 0090 D34D6210 		.word	274877907
 342 0094 00000000 		.word	g_fac_us
 343 0098 40420F00 		.word	1000000
 344              		.cfi_endproc
 345              	.LFE67:
 347              		.section	.text.HAL_Delay,"ax",%progbits
 348              		.align	1
 349              		.p2align 2,,3
 350              		.global	HAL_Delay
 351              		.syntax unified
 352              		.thumb
 353              		.thumb_func
 355              	HAL_Delay:
 356              	.LVL22:
 357              	.LFB68:
 268:Drivers/SYSTEM/delay/delay.c **** 
 269:Drivers/SYSTEM/delay/delay.c **** /**
 270:Drivers/SYSTEM/delay/delay.c ****   * @brief HAL¿âÄÚ²¿º¯ÊýÓÃµ½µÄÑÓÊ±
 271:Drivers/SYSTEM/delay/delay.c ****            HAL¿âµÄÑÓÊ±Ä¬ÈÏÓÃSystick£¬Èç¹ûÎÒÃÇÃ»ÓÐ¿ªSystickµÄÖÐ¶Ï»áµ¼ÖÂµ÷ÓÃÕâ¸öÑÓÊ±ºóÎÞ·¨ÍË³ö
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 13


 272:Drivers/SYSTEM/delay/delay.c ****   * @param Delay ÒªÑÓÊ±µÄºÁÃëÊý
 273:Drivers/SYSTEM/delay/delay.c ****   * @retval None
 274:Drivers/SYSTEM/delay/delay.c ****   */
 275:Drivers/SYSTEM/delay/delay.c **** void HAL_Delay(uint32_t Delay)
 276:Drivers/SYSTEM/delay/delay.c **** {
 358              		.loc 1 276 1 is_stmt 1 view -0
 359              		.cfi_startproc
 360              		@ args = 0, pretend = 0, frame = 0
 361              		@ frame_needed = 0, uses_anonymous_args = 0
 362              		@ link register save eliminated.
 277:Drivers/SYSTEM/delay/delay.c ****      delay_ms(Delay);
 363              		.loc 1 277 6 view .LVU109
 364              	.LBB22:
 365              	.LBB23:
 255:Drivers/SYSTEM/delay/delay.c **** 
 366              		.loc 1 255 27 is_stmt 0 view .LVU110
 367 0000 4FF47A72 		mov	r2, #1000
 252:Drivers/SYSTEM/delay/delay.c ****                                      *  ±ÈÈç128MhzµÄÊ±ºò, delay_us×î´óÖ»ÄÜÑÓÊ±1048576us×óÓÒÁË
 368              		.loc 1 252 27 view .LVU111
 369 0004 2349     		ldr	r1, .L46
 370              	.LBE23:
 371              	.LBE22:
 372              		.loc 1 277 6 view .LVU112
 373 0006 83B2     		uxth	r3, r0
 374              	.LVL23:
 375              	.LBB38:
 376              	.LBI22:
 250:Drivers/SYSTEM/delay/delay.c **** {
 377              		.loc 1 250 6 is_stmt 1 view .LVU113
 378              	.LBB34:
 252:Drivers/SYSTEM/delay/delay.c ****                                      *  ±ÈÈç128MhzµÄÊ±ºò, delay_us×î´óÖ»ÄÜÑÓÊ±1048576us×óÓÒÁË
 379              		.loc 1 252 5 view .LVU114
 252:Drivers/SYSTEM/delay/delay.c ****                                      *  ±ÈÈç128MhzµÄÊ±ºò, delay_us×î´óÖ»ÄÜÑÓÊ±1048576us×óÓÒÁË
 380              		.loc 1 252 27 is_stmt 0 view .LVU115
 381 0008 A1FB0301 		umull	r0, r1, r1, r3
 382              	.LVL24:
 252:Drivers/SYSTEM/delay/delay.c ****                                      *  ±ÈÈç128MhzµÄÊ±ºò, delay_us×î´óÖ»ÄÜÑÓÊ±1048576us×óÓÒÁË
 383              		.loc 1 252 27 view .LVU116
 384              	.LBE34:
 385              	.LBE38:
 276:Drivers/SYSTEM/delay/delay.c ****      delay_ms(Delay);
 386              		.loc 1 276 1 view .LVU117
 387 000c 30B4     		push	{r4, r5}
 388              	.LCFI5:
 389              		.cfi_def_cfa_offset 8
 390              		.cfi_offset 4, -8
 391              		.cfi_offset 5, -4
 392              	.LBB39:
 393              	.LBB35:
 252:Drivers/SYSTEM/delay/delay.c ****                                      *  ±ÈÈç128MhzµÄÊ±ºò, delay_us×î´óÖ»ÄÜÑÓÊ±1048576us×óÓÒÁË
 394              		.loc 1 252 27 view .LVU118
 395 000e 8D09     		lsrs	r5, r1, #6
 255:Drivers/SYSTEM/delay/delay.c **** 
 396              		.loc 1 255 27 view .LVU119
 397 0010 02FB1535 		mls	r5, r2, r5, r3
 398              	.LVL25:
 255:Drivers/SYSTEM/delay/delay.c **** 
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 14


 399              		.loc 1 255 5 is_stmt 1 view .LVU120
 257:Drivers/SYSTEM/delay/delay.c ****     {
 400              		.loc 1 257 12 is_stmt 0 view .LVU121
 401 0014 9342     		cmp	r3, r2
 255:Drivers/SYSTEM/delay/delay.c **** 
 402              		.loc 1 255 27 view .LVU122
 403 0016 ADB2     		uxth	r5, r5
 404              	.LVL26:
 257:Drivers/SYSTEM/delay/delay.c ****     {
 405              		.loc 1 257 5 is_stmt 1 view .LVU123
 257:Drivers/SYSTEM/delay/delay.c ****     {
 406              		.loc 1 257 12 view .LVU124
 407 0018 1AD3     		bcc	.L31
 408              	.LBB24:
 409              	.LBB25:
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 410              		.loc 1 232 19 is_stmt 0 view .LVU125
 411 001a 4FF0E022 		mov	r2, #-536813568
 233:Drivers/SYSTEM/delay/delay.c ****     SysTick->CTRL |= 1 << 0 ;       /* ¿ªÊ¼µ¹Êý */
 412              		.loc 1 233 18 view .LVU126
 413 001e 0020     		movs	r0, #0
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 414              		.loc 1 232 25 view .LVU127
 415 0020 1D4B     		ldr	r3, .L46+4
 416              	.LVL27:
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 417              		.loc 1 232 25 view .LVU128
 418 0022 8909     		lsrs	r1, r1, #6
 419              	.LVL28:
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 420              		.loc 1 232 25 view .LVU129
 421 0024 1C88     		ldrh	r4, [r3]
 422 0026 1D4B     		ldr	r3, .L46+8
 423 0028 03FB04F4 		mul	r4, r3, r4
 424              	.LVL29:
 425              	.L33:
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 426              		.loc 1 232 25 view .LVU130
 427              	.LBE25:
 428              	.LBE24:
 259:Drivers/SYSTEM/delay/delay.c ****         repeat--;
 429              		.loc 1 259 9 is_stmt 1 view .LVU131
 430              	.LBB28:
 431              	.LBI24:
 229:Drivers/SYSTEM/delay/delay.c **** {
 432              		.loc 1 229 6 view .LVU132
 433              	.LBB26:
 231:Drivers/SYSTEM/delay/delay.c ****     SysTick->LOAD = nus * g_fac_us; /* Ê±¼ä¼ÓÔØ */
 434              		.loc 1 231 5 view .LVU133
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 435              		.loc 1 232 5 view .LVU134
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 436              		.loc 1 232 19 is_stmt 0 view .LVU135
 437 002c 5461     		str	r4, [r2, #20]
 233:Drivers/SYSTEM/delay/delay.c ****     SysTick->CTRL |= 1 << 0 ;       /* ¿ªÊ¼µ¹Êý */
 438              		.loc 1 233 5 is_stmt 1 view .LVU136
 233:Drivers/SYSTEM/delay/delay.c ****     SysTick->CTRL |= 1 << 0 ;       /* ¿ªÊ¼µ¹Êý */
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 15


 439              		.loc 1 233 18 is_stmt 0 view .LVU137
 440 002e 9061     		str	r0, [r2, #24]
 234:Drivers/SYSTEM/delay/delay.c **** 
 441              		.loc 1 234 5 is_stmt 1 view .LVU138
 234:Drivers/SYSTEM/delay/delay.c **** 
 442              		.loc 1 234 12 is_stmt 0 view .LVU139
 443 0030 1369     		ldr	r3, [r2, #16]
 234:Drivers/SYSTEM/delay/delay.c **** 
 444              		.loc 1 234 19 view .LVU140
 445 0032 43F00103 		orr	r3, r3, #1
 446 0036 1361     		str	r3, [r2, #16]
 447              	.L32:
 236:Drivers/SYSTEM/delay/delay.c ****     {
 448              		.loc 1 236 5 is_stmt 1 view .LVU141
 238:Drivers/SYSTEM/delay/delay.c ****     } while ((temp & 0x01) && !(temp & (1 << 16))); /* CTRL.ENABLEÎ»±ØÐëÎª1, ²¢µÈ´ýÊ±¼äµ½´ï */
 449              		.loc 1 238 9 view .LVU142
 238:Drivers/SYSTEM/delay/delay.c ****     } while ((temp & 0x01) && !(temp & (1 << 16))); /* CTRL.ENABLEÎ»±ØÐëÎª1, ²¢µÈ´ýÊ±¼äµ½´ï */
 450              		.loc 1 238 14 is_stmt 0 view .LVU143
 451 0038 1369     		ldr	r3, [r2, #16]
 452              	.LVL30:
 239:Drivers/SYSTEM/delay/delay.c **** 
 453              		.loc 1 239 28 is_stmt 1 view .LVU144
 454 003a 03F00113 		and	r3, r3, #65537
 455              	.LVL31:
 239:Drivers/SYSTEM/delay/delay.c **** 
 456              		.loc 1 239 28 is_stmt 0 view .LVU145
 457 003e 012B     		cmp	r3, #1
 458 0040 FAD0     		beq	.L32
 241:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0X00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 459              		.loc 1 241 5 is_stmt 1 view .LVU146
 241:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0X00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 460              		.loc 1 241 12 is_stmt 0 view .LVU147
 461 0042 1369     		ldr	r3, [r2, #16]
 462              	.LBE26:
 463              	.LBE28:
 257:Drivers/SYSTEM/delay/delay.c ****     {
 464              		.loc 1 257 12 view .LVU148
 465 0044 0139     		subs	r1, r1, #1
 466              	.LVL32:
 467              	.LBB29:
 468              	.LBB27:
 241:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0X00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 469              		.loc 1 241 19 view .LVU149
 470 0046 23F00103 		bic	r3, r3, #1
 471 004a 1361     		str	r3, [r2, #16]
 242:Drivers/SYSTEM/delay/delay.c **** }
 472              		.loc 1 242 5 is_stmt 1 view .LVU150
 242:Drivers/SYSTEM/delay/delay.c **** }
 473              		.loc 1 242 18 is_stmt 0 view .LVU151
 474 004c 9061     		str	r0, [r2, #24]
 475              	.LVL33:
 242:Drivers/SYSTEM/delay/delay.c **** }
 476              		.loc 1 242 18 view .LVU152
 477              	.LBE27:
 478              	.LBE29:
 260:Drivers/SYSTEM/delay/delay.c ****     }
 479              		.loc 1 260 9 is_stmt 1 view .LVU153
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 16


 257:Drivers/SYSTEM/delay/delay.c ****     {
 480              		.loc 1 257 12 view .LVU154
 481 004e EDD1     		bne	.L33
 482              	.L31:
 263:Drivers/SYSTEM/delay/delay.c ****     {
 483              		.loc 1 263 5 view .LVU155
 263:Drivers/SYSTEM/delay/delay.c ****     {
 484              		.loc 1 263 8 is_stmt 0 view .LVU156
 485 0050 0DB9     		cbnz	r5, .L45
 486              	.LBE35:
 487              	.LBE39:
 278:Drivers/SYSTEM/delay/delay.c **** }
 488              		.loc 1 278 1 view .LVU157
 489 0052 30BC     		pop	{r4, r5}
 490              	.LCFI6:
 491              		.cfi_remember_state
 492              		.cfi_restore 5
 493              		.cfi_restore 4
 494              		.cfi_def_cfa_offset 0
 495              	.LVL34:
 496              		.loc 1 278 1 view .LVU158
 497 0054 7047     		bx	lr
 498              	.LVL35:
 499              	.L45:
 500              	.LCFI7:
 501              		.cfi_restore_state
 502              	.LBB40:
 503              	.LBB36:
 265:Drivers/SYSTEM/delay/delay.c ****     }
 504              		.loc 1 265 9 is_stmt 1 view .LVU159
 505              	.LBB30:
 506              	.LBI30:
 229:Drivers/SYSTEM/delay/delay.c **** {
 507              		.loc 1 229 6 view .LVU160
 508              	.LBB31:
 231:Drivers/SYSTEM/delay/delay.c ****     SysTick->LOAD = nus * g_fac_us; /* Ê±¼ä¼ÓÔØ */
 509              		.loc 1 231 5 view .LVU161
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 510              		.loc 1 232 5 view .LVU162
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 511              		.loc 1 232 25 is_stmt 0 view .LVU163
 512 0056 4FF47A70 		mov	r0, #1000
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 513              		.loc 1 232 19 view .LVU164
 514 005a 4FF0E022 		mov	r2, #-536813568
 233:Drivers/SYSTEM/delay/delay.c ****     SysTick->CTRL |= 1 << 0 ;       /* ¿ªÊ¼µ¹Êý */
 515              		.loc 1 233 18 view .LVU165
 516 005e 0021     		movs	r1, #0
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 517              		.loc 1 232 25 view .LVU166
 518 0060 0D4B     		ldr	r3, .L46+4
 519 0062 1B88     		ldrh	r3, [r3]
 520 0064 05FB03F3 		mul	r3, r5, r3
 521 0068 00FB03F3 		mul	r3, r0, r3
 232:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0x00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 522              		.loc 1 232 19 view .LVU167
 523 006c 5361     		str	r3, [r2, #20]
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 17


 233:Drivers/SYSTEM/delay/delay.c ****     SysTick->CTRL |= 1 << 0 ;       /* ¿ªÊ¼µ¹Êý */
 524              		.loc 1 233 5 is_stmt 1 view .LVU168
 233:Drivers/SYSTEM/delay/delay.c ****     SysTick->CTRL |= 1 << 0 ;       /* ¿ªÊ¼µ¹Êý */
 525              		.loc 1 233 18 is_stmt 0 view .LVU169
 526 006e 9161     		str	r1, [r2, #24]
 234:Drivers/SYSTEM/delay/delay.c **** 
 527              		.loc 1 234 5 is_stmt 1 view .LVU170
 234:Drivers/SYSTEM/delay/delay.c **** 
 528              		.loc 1 234 12 is_stmt 0 view .LVU171
 529 0070 1369     		ldr	r3, [r2, #16]
 234:Drivers/SYSTEM/delay/delay.c **** 
 530              		.loc 1 234 19 view .LVU172
 531 0072 43F00103 		orr	r3, r3, #1
 532 0076 1361     		str	r3, [r2, #16]
 533              	.L35:
 236:Drivers/SYSTEM/delay/delay.c ****     {
 534              		.loc 1 236 5 is_stmt 1 view .LVU173
 238:Drivers/SYSTEM/delay/delay.c ****     } while ((temp & 0x01) && !(temp & (1 << 16))); /* CTRL.ENABLEÎ»±ØÐëÎª1, ²¢µÈ´ýÊ±¼äµ½´ï */
 535              		.loc 1 238 9 view .LVU174
 238:Drivers/SYSTEM/delay/delay.c ****     } while ((temp & 0x01) && !(temp & (1 << 16))); /* CTRL.ENABLEÎ»±ØÐëÎª1, ²¢µÈ´ýÊ±¼äµ½´ï */
 536              		.loc 1 238 14 is_stmt 0 view .LVU175
 537 0078 1369     		ldr	r3, [r2, #16]
 538              	.LVL36:
 239:Drivers/SYSTEM/delay/delay.c **** 
 539              		.loc 1 239 28 is_stmt 1 view .LVU176
 540 007a 03F00113 		and	r3, r3, #65537
 541              	.LVL37:
 239:Drivers/SYSTEM/delay/delay.c **** 
 542              		.loc 1 239 28 is_stmt 0 view .LVU177
 543 007e 012B     		cmp	r3, #1
 544 0080 FAD0     		beq	.L35
 241:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0X00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 545              		.loc 1 241 5 is_stmt 1 view .LVU178
 546              	.LBE31:
 547              	.LBE30:
 548              	.LBE36:
 549              	.LBE40:
 550              		.loc 1 278 1 is_stmt 0 view .LVU179
 551 0082 30BC     		pop	{r4, r5}
 552              	.LCFI8:
 553              		.cfi_restore 5
 554              		.cfi_restore 4
 555              		.cfi_def_cfa_offset 0
 556              	.LVL38:
 557              	.LBB41:
 558              	.LBB37:
 559              	.LBB33:
 560              	.LBB32:
 242:Drivers/SYSTEM/delay/delay.c **** }
 561              		.loc 1 242 18 view .LVU180
 562 0084 0021     		movs	r1, #0
 241:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0X00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 563              		.loc 1 241 12 view .LVU181
 564 0086 1369     		ldr	r3, [r2, #16]
 241:Drivers/SYSTEM/delay/delay.c ****     SysTick->VAL = 0X00;            /* Çå¿Õ¼ÆÊýÆ÷ */
 565              		.loc 1 241 19 view .LVU182
 566 0088 23F00103 		bic	r3, r3, #1
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 18


 567 008c 1361     		str	r3, [r2, #16]
 242:Drivers/SYSTEM/delay/delay.c **** }
 568              		.loc 1 242 5 is_stmt 1 view .LVU183
 242:Drivers/SYSTEM/delay/delay.c **** }
 569              		.loc 1 242 18 is_stmt 0 view .LVU184
 570 008e 9161     		str	r1, [r2, #24]
 571              	.LVL39:
 242:Drivers/SYSTEM/delay/delay.c **** }
 572              		.loc 1 242 18 view .LVU185
 573              	.LBE32:
 574              	.LBE33:
 575              	.LBE37:
 576              	.LBE41:
 577              		.loc 1 278 1 view .LVU186
 578 0090 7047     		bx	lr
 579              	.L47:
 580 0092 00BF     		.align	2
 581              	.L46:
 582 0094 D34D6210 		.word	274877907
 583 0098 00000000 		.word	g_fac_us
 584 009c 40420F00 		.word	1000000
 585              		.cfi_endproc
 586              	.LFE68:
 588              		.section	.bss.g_fac_us,"aw",%nobits
 589              		.align	1
 592              	g_fac_us:
 593 0000 0000     		.space	2
 594              		.text
 595              	.Letext0:
 596              		.file 2 "d:\\appdev\\vsarm\\armcc\\arm-none-eabi\\include\\machine\\_default_types.h"
 597              		.file 3 "d:\\appdev\\vsarm\\armcc\\arm-none-eabi\\include\\sys\\_stdint.h"
 598              		.file 4 "Drivers/CMSIS/Include/core_cm3.h"
 599              		.file 5 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_cortex.h"
ARM GAS  C:\Users\86184\AppData\Local\Temp\cciMMKA9.s 			page 19


DEFINED SYMBOLS
                            *ABS*:00000000 delay.c
C:\Users\86184\AppData\Local\Temp\cciMMKA9.s:19     .text.delay_init:00000000 $t
C:\Users\86184\AppData\Local\Temp\cciMMKA9.s:26     .text.delay_init:00000000 delay_init
C:\Users\86184\AppData\Local\Temp\cciMMKA9.s:63     .text.delay_init:0000001c $d
C:\Users\86184\AppData\Local\Temp\cciMMKA9.s:592    .bss.g_fac_us:00000000 g_fac_us
C:\Users\86184\AppData\Local\Temp\cciMMKA9.s:68     .text.delay_us:00000000 $t
C:\Users\86184\AppData\Local\Temp\cciMMKA9.s:75     .text.delay_us:00000000 delay_us
C:\Users\86184\AppData\Local\Temp\cciMMKA9.s:132    .text.delay_us:00000034 $d
C:\Users\86184\AppData\Local\Temp\cciMMKA9.s:137    .text.delay_ms:00000000 $t
C:\Users\86184\AppData\Local\Temp\cciMMKA9.s:144    .text.delay_ms:00000000 delay_ms
C:\Users\86184\AppData\Local\Temp\cciMMKA9.s:341    .text.delay_ms:00000090 $d
C:\Users\86184\AppData\Local\Temp\cciMMKA9.s:348    .text.HAL_Delay:00000000 $t
C:\Users\86184\AppData\Local\Temp\cciMMKA9.s:355    .text.HAL_Delay:00000000 HAL_Delay
C:\Users\86184\AppData\Local\Temp\cciMMKA9.s:582    .text.HAL_Delay:00000094 $d
C:\Users\86184\AppData\Local\Temp\cciMMKA9.s:589    .bss.g_fac_us:00000000 $d

UNDEFINED SYMBOLS
HAL_SYSTICK_CLKSourceConfig
